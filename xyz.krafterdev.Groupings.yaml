app-id: xyz.krafterdev.Groupings
runtime: org.gnome.Platform
runtime-version: '45'
sdk: org.gnome.Sdk
command: /app/start/start.sh
modules:
  - name: python3-chardet
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "chardet~=3.0.4" --no-build-isolation
    sources:
      - &id002
        type: file
        url: https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl
        sha256: fc323ffcaeaed0e0a02bf4d117757b98aed530d9ed4531e3e15460124c106691
  - name: python3-flit
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "flit~=3.9.0" --no-build-isolation
    sources:
      - &id001
        type: file
        url: https://files.pythonhosted.org/packages/64/62/428ef076be88fa93716b576e4a01f919d25968913e817077a386fcbe4f42/certifi-2023.11.17-py3-none-any.whl
        sha256: e036ab49d5b79556f99cfc2d9320b34cfbe5be05c5871b51de9329f0603b0474
      - type: file
        url: https://files.pythonhosted.org/packages/26/87/f238c0670b94533ac0353a4e2a1a771a0cc73277b88bff23d3ae35a256c1/docutils-0.20.1-py3-none-any.whl
        sha256: 96f387a2c5562db4476f09f13bbab2192e764cac08ebbf3a34a95d9b1e4a59d6
      - type: file
        url: https://files.pythonhosted.org/packages/68/0e/b1d1a1201215bf54adea518e79d0f0e84e376bec896c3a6ed437e5201471/flit-3.9.0-py3-none-any.whl
        sha256: 076c3aaba5ac24cf0ad3251f910900d95a08218e6bcb26f21fef1036cc4679ca
      - type: file
        url: https://files.pythonhosted.org/packages/38/45/618e84e49a6c51e5dd15565ec2fcd82ab273434f236b8f108f065ded517a/flit_core-3.9.0-py3-none-any.whl
        sha256: 7aada352fb0c7f5538c4fafeddf314d3a6a92ee8e2b1de70482329e42de70301
      - &id003
        type: file
        url: https://files.pythonhosted.org/packages/4b/2a/0276479a4b3caeb8a8c1af2f8e4355746a97fab05a372e4a2c6a6b876165/idna-2.7-py2.py3-none-any.whl
        sha256: 156a6814fb5ac1fc6850fb002e0852d56c0c8d2531923a51032d1b70760e186e
      - &id004
        type: file
        url: https://files.pythonhosted.org/packages/ff/17/5cbb026005115301a8fb2f9b0e3e8d32313142fe8b617070e7baad20554f/requests-2.20.1-py2.py3-none-any.whl
        sha256: 65b3a120e4329e33c9889db89c80976c5272f56ea92d3e74da8a463992e3ff54
      - type: file
        url: https://files.pythonhosted.org/packages/bb/01/1da9c66ecb20f31ed5aa5316a957e0b1a5e786a0d9689616ece4ceaf1321/tomli_w-1.0.0-py3-none-any.whl
        sha256: 9f2a07e8be30a0729e533ec968016807069991ae2fd921a78d42f429ae5f4463
      - &id005
        type: file
        url: https://files.pythonhosted.org/packages/01/11/525b02e4acc0c747de8b6ccdab376331597c569c42ea66ab0a1dbd36eca2/urllib3-1.24.3-py2.py3-none-any.whl
        sha256: a637e5fae88995b256e3409dc4d52c2e2e0ba32c42a6365fee8bbd2238de3cfb
  - name: python3-groupme-push
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "groupme-push~=0.0.2" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/d5/25/5ed7384b92e7c35909b8e939096cc24a13d64fc4e3a16c0d4b9438c3f88c/base36-0.1.1-py2.py3-none-any.whl
        sha256: 15eec75cf938a2186349e6b6dfc7320c73c065921493be83808c68d909b15763
      - *id001
      - *id002
      - type: file
        url: https://files.pythonhosted.org/packages/f1/87/348cfe3898aaf307672bc75de2cce60b74cdd4d49d7db27e613ed1bfb150/groupme_push-0.0.2-py3-none-any.whl
        sha256: ddca826c8006b0e0486c133e4d5e1415e7a74c50479db829c32b408852a6a145
      - *id003
      - *id004
      - *id005
      - type: file
        url: https://files.pythonhosted.org/packages/1e/70/1e88138a9afbed1d37093b85f0bebc3011623c4f47c166431599fe9d6c93/websocket_client-1.7.0-py3-none-any.whl
        sha256: f4c3d22fec12a2461427a29957ff07d35098ee2d976d3ba244e688b8b4057588
  - name: python3-GroupyAPI
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "GroupyAPI~=0.10.3" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/8d/3f/428c95662e21f78cd740c8079378e4b902f7b81ccb2b06354576f2e9597e/GroupyAPI-0.10.3-py3-none-any.whl
        sha256: ef2d94cb16643b13233cef1e109bfc3fb54983018bfe20444fd9ad2c4d2cfdf9
      - *id001
      - *id002
      - *id003
      - *id004
      - *id005
  - name: python3-pyxdg
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "pyxdg~=0.28" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/e5/8d/cf41b66a8110670e3ad03dab9b759704eeed07fa96e90fdc0357b2ba70e2/pyxdg-0.28-py2.py3-none-any.whl
        sha256: bdaf595999a0178ecea4052b7f4195569c1ff4d344567bccdc12dfdf02d545ab

  # The App Itself.
  - name: groupings
    buildsystem: simple
    build-commands:
      # Python Package
      - pip3 install --verbose --exists-action=i --no-index --prefix=${FLATPAK_DEST} . --no-build-isolation
      # Icon
      - mkdir -p /app/share/icons/hicolor/scalable/apps/
      - cp src/assets/icons/export/xyz.krafterdev.Groupings.svg /app/share/icons/hicolor/scalable/apps/xyz.krafterdev.Groupings.svg
      - cp src/assets/icons/export/xyz.krafterdev.Groupings.Devel.svg /app/share/icons/hicolor/scalable/apps/xyz.krafterdev.Groupings.Devel.svg
      - cp src/assets/icons/export/xyz.krafterdev.Groupings-symbolic.svg /app/share/icons/hicolor/scalable/apps/xyz.krafterdev.Groupings-symbolic.svg
      # Desktop Entry
      - mkdir -p /app/share/applications/
      - mkdir -p /app/cache
      - desktop-file-install --rebuild-mime-info-cache --dir=/app/share/applications src/flatpak/xyz.krafterdev.Groupings.desktop
      # Metainfo
      - mkdir -p /app/share/metainfo
      - cp src/flatpak/xyz.krafterdev.Groupings.metainfo.xml /app/share/metainfo/xyz.krafterdev.Groupings.metainfo.xml
      # Startup Script
      - install -D ./src/flatpak/start.sh /app/start/start.sh
      - chmod +x /app/start/start.sh
      # Copy Assets
      - cp -r src/assets/ /app/assets/
    sources:
      - type: dir
        path: ./
  
finish-args:
  - --device=dri
  - --share=network
  - --socket=fallback-x11
  - --socket=wayland
  - --talk-name=org.freedesktop.SecretService
  #- --talk-name=org.freedesktop.Notifications
